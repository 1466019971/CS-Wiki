# 一、网络安全的目的

网络安全的目的就是：**保护网络资源（此处主要指信息资源），免受攻击**；

基于网络的应用可能受到的安全威胁如下：

<img src="https://gitee.com/veal98/images/raw/master/img/20200420180652.png" style="zoom:80%;" />

- **截取（窃取）**：非法截取网络信息，窃取其中的机密； 
- **篡改**：对截取的数据进行部分/全部篡改，再送到目的地； 
- **伪造**：冒充合法用户进行网络操作，嫁祸于人； 
- **重播/插播**：干扰用户的正常操作； 
- **发方否认**：否认已向接受者发送过数据； 
- **收方否认**：否认已收取过发送方发送的数据。

<br>

# 二、抵御攻击的安全服务

⚠ 所有的服务只能保证出现的攻击可以被识别， 并不能防止攻击的发生

<img src="https://gitee.com/veal98/images/raw/master/img/20200420174719.png" style="zoom: 60%;" />

## 1. 内容保密 — 防窃取

采用**加密技术**对数据进行加密； 

为提高加密的效率，混合使用秘密密钥加密体系和公开密钥加密体系的算法。

<img src="https://gitee.com/veal98/images/raw/master/img/20200420174932.png" style="zoom:67%;" />

- 对应每次通信，形成一个一次性密钥（随机数）； 
- 只有指定的收方才可以获得密钥，解密密文； 
- 使用DES算法和该密钥对明文加密，提高效率； 
- 使用RSA算法对密钥加密，保护密钥的秘密性

## 2. 内容完整性—防篡改

依赖**摘录技术**的特性（报文和摘录息息相关）。 

工作过程： 

- 发送方利用摘录算法（如MD5）形成摘录值（报文完整性检查值— `MIC` 值）； 

- 用密钥对摘录值进行加密形成数字签名

- 报文连同数字签名一起传递给接收方； 

- 接收方解密并分隔报文和MIC值；

- 对报文执行相同的摘录算法，形成新的MIC值； 

- 新/ 原MIC值比较，判断报文在传输过程中是否被修改

  

<img src="https://gitee.com/veal98/images/raw/master/img/20200420175239.png" style="zoom:60%;" />



## 3. 序列完整性 —防重播

在报文中增加**序号和时标**（报文形成或者发送的时间值）； 接收方**按序接受**报文。

<img src="https://gitee.com/veal98/images/raw/master/img/20200420175423.png" style="zoom: 67%;" />

## 4. 实体鉴别 ：— 防冒充（假冒）

含身份鉴别和数据源鉴别。 

- **身份鉴别** — 鉴别对等实体的身份

  进入系统时常用的鉴别身份的方法为传递用户标识和口令字， 并和系统内保留的用户标识和口令字进行比较，验证用户的合法性

- **数据源鉴别** — 鉴别数据真实性，确认数据来自正确的发送方

  <u>`数字签名`</u>技术支持数据源的鉴别

  <img src="https://gitee.com/veal98/images/raw/master/img/20200420175918.png" style="zoom:60%;" />

  **描述：**

  - 形成的报文数字签名和报文内容及发方密钥密切相关； 

  - 收方利用发方的公钥处理签名，获得原始MIC值； 

  - 收方利用MD5对报文求MIC值； 

  - 如果新MIC值和原始MIC值一致，可认为报文确实来自于 期望的发送方，且在传输过程中内容未被篡改。 
  
  **依据：**只有发方才掌握发方的私钥

## 5. 防否认服务 — 抵御合法用户对所作的操作进行否认

理想的解决方案：**第三方的参与和仲裁**。 

**措施：**

- 至少维护一个`双方可信的认证中心（CA）`，合法用户需在中心注册，获得自己的密钥对；
- CA以安全的方式转发通信双方的报文，并予以记录，作为产生异议时的仲裁依据。

<img src="https://gitee.com/veal98/images/raw/master/img/20200420180154.png" style="zoom: 67%;" />

**过程**：

- A以CA的公钥和A的私钥向CA认证自身，并获得 B的公钥；
- A以B的公钥形成密文（容许含随机密钥的秘密加密）， 并提交CA；
- CA记录全部或者部分（如MIC值）信息后，转发密文至B；
- B收取报文后，应向CA返回确认信息

<br>

# 三、防火墙

防火墙：保护内部网络的资源免受外界的侵袭

<img src="https://gitee.com/veal98/images/raw/master/img/20200422204157.png" style="zoom:80%;" />

## 防火墙的原理

### 1. 分组过滤

原理：**分析报文**，对应其中的所有参数，设置过滤策略， **允许或者拒绝该报文穿越防火墙**；

分析的参数有：源IP地址（仅允许哪些设备访问内部网）、宿IP地 址（仅允许访问哪些结点）、端口号（允许使用哪些服务）等； 

设置的策略包括：访问的时间段、并发访问的个数等；

 一般策略为：不明确表示“允许”的就是禁止。

### 2. 代理服务

**代理外部（或内部）用户访问内部（或外部）网络，杜绝内部和外部的直接访问**。 

代理服务器分析客户的请求，根据制定的策略决定允许或者拒 绝某个特定的请求；

当一个请求被允许时，代理服务器就“代表” 该客户执行访问操作，并将结果返回客户。 此处的“代表”隐含了分组中IP地址的转换（迁移）。 

此类防火墙安全较高，但效率受影响，常用于特定的应用服务 （如FTP服务、Telnet服务、远程拨号服务等）

<img src="https://gitee.com/veal98/images/raw/master/img/20200422204748.png" style="zoom:80%;" />

### 3. 地址转换 NAT

针对IP地址告急和专用IP地址在部分企业网中的应用，出现 了地址转换路由器（NAT路由器或者NAT服务器）。 

当内外用户希望相互访问时，**NAT路由器负责全局/本地IP地 址的映射**，屏蔽内部IP地址； 

NAT服务器专门进行地址转换工作，并增加各种安全策略， 限制地址的转换，隔离内外网络。

<img src="https://gitee.com/veal98/images/raw/master/img/20200422204911.png" style="zoom:80%;" />