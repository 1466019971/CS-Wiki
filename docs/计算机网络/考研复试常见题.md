#  🔅 计算机网络 考研常见复试题汇总

> 题目来源：🎓 灰灰考研计算机复试全书

---

# 一、网络模型

## 七层网络模型

- 物理层
- 数据链路层（CSMA、CSMA/CA、CSMA/CD）
- 网络层（IP、ARP（IP->MAC）、RARP (MAC->IP)、ICMP）
- 传输层（TCP、UDP）
- 会话层
- 表示层
- 应用层

![](https://cdn.nlark.com/yuque/0/2020/png/1237282/1585996706065-4ed09af3-7948-4fd4-bf48-f59399d8f768.png#align=left&display=inline&height=366&originHeight=366&originWidth=755&size=0&status=done&style=none&width=755)

<img src="https://cdn.nlark.com/yuque/0/2020/png/1237282/1585996706231-6e75c868-ebd0-49e6-9bf8-ec30e065a3d1.png#align=left&amp;display=inline&amp;height=1000&amp;originHeight=1000&amp;originWidth=1999&amp;size=0&amp;status=done&amp;style=none&amp;width=1999" style="zoom: 45%;" />

## 计算机网络中各层的作用

- **物理层的作用**
   在物理层上所传送的数据单位是比特。 物理层(physical layer)的作用是**实现相邻计算机节点之间比特流的透明传送，尽可能屏蔽掉具体传输介质和物理设备的差异。** 使其上面的数据链路层不必考虑网络的具体传输介质是什么。“**透明传送比特流**”表示经实际电路传送后的比特流没有发生变化，对传送的比特流来说，这个电路好像是看不见的。
- **数据链路层**
   数据链路层在物理层提供的服务的基础上向网络层提供服务，将原始的、有差错的物理线路改进成逻辑上 无差错的数据链路，从而向网络层提供高质量的服务。**数据链路层将网络层交下来的 IP 数据报组装成帧**，在两个相邻节点间的链路上传送帧。 
  功能主要有：
   ①链路管理；
   ②封装成帧；
   ③透明传输；
   ④差错检测
- **网络层的作用**
   在 计算机网络中进行通信的两个计算机之间可能会经过很多个数据链路，也可能还要经过很多通信子网。**网络层的任务就是选择合适的网间路由和交换结点， 确保数据及时传送。** 在发送数据时，**网络层把运输层产生的报文段或用户数据报封装成IP数据报/分组和包进行传送**。在 TCP/IP 体系结构中，由于网络层使用 IP 协议，因此分组也叫 IP 数据报 ，简称 数据报。
- **传输层的作用**
   **运输层(transport layer)的主要任务就是负责向两台主机进程之间的通信提供通用的数据传输服务**。应用进程利用该服务传送应用层报文。“通用的”是指并不针对某一个特定的网络应用，而是多种应用可以使用同一个运输层服务。由于一台主机可同时运行多个线程，因此运输层有**复用和分用**的功能。所谓复用就是指多个应用层进程可同时使用下面运输层的服务，分用和复用相反，是运输层把收到的信息分别交付上面应用层中的相应进程。
- **应用层的作用**
   **应用层(application-layer）的任务是通过应用进程间的交互来完成特定网络应用**。应用层协议定义的是应用进程（进程：主机中正在运行的程序）间的通信和交互的规则。对于不同的网络应用需要不同的应用层协议。在互联网中应用层协议很多，如域名系统DNS，支持万维网应用的 HTTP协议，支持电子邮件的 SMTP协议等等。我们把应用层交互的数据单元称为报文。



# 二、数据链路层

## 数据链路层协议

- `CSMA 载波监听多路访问协议`：先听再说
- `CSMA/CD 载波监听多点接入/碰撞检测`：先听再说，边听边说（一边发送一边检测其他站是否也在发送数据），冲突停发、随机重发
- `CSMA/CA 载波监听多点接入/碰撞避免`：
- `PPP点对点协议`：目前使用最广泛的数据链路层协议，用户使用拨号电话接入因特网时一般都使用PPP协议。面向字节；
   不需要的功能：纠错（PPP协议只负责检错）、流量控制（由TCP 负责）、序号（PPP协议是不可靠传输协议，故不需要对帧进行编号）、多点线路（PPP协议是点对点 的通信方式）、半双工或单工（**PPP只支持全双工链路**）

- `ARQ 停等协议`

## 单工、半双工、全双工

- 单工：又称为单向通信，即只能有一个方向的通信而没有反方向的交互。例：无线电广播，电视广播
- 半双工：又称为双向交替通信，即通信的双方都可以发送信息，但不能双方同时发送（当然也就不能同时接受）例：对讲机
- 全双工：又称为双向同时通信，即通信的双方可以同时发送和接受信息。例：打电话



**单工只要一条信道，而半双工和全双工需都需要两条信道（每个方向各一条）。**

## 频分复用 时分复用 波分复用 码分复用

- 频分复用 FDM：给每个信号分配唯一的载波频率并通过单一媒体来传输多个独立信号的方法。
- 时分复用 TDM：把多个信号复用到单个硬件传输信道，它允许每个信号在一个很短的时间使用信道，接着再让 下一个信号使用。
- 波分复用 WDM：就是光的频分复用。用一根光纤同时传输多个频率很接近的光载波信号。
- 码分复用 CDM：码分复用是用一组包含互相正交的码字的码组携带多路信号。**每一个用户可以在同样的时间使 用同样的频带进行通信。由于各用户使用经过特殊挑选的不同码型，各用户之间不会造成干扰**，因此这种 系统发送的信号有很强的抗干扰能力。

## 频分复用如何避免各路信号间的干扰

**频分复用要求总频率宽度大于各个子信道频率之和**，同时为了保证各子信道中所传输的信号互不干扰，**应在各子信道之间设立隔离带（也就是保护频带，即插入一些 空白的频段 ）**，这样就保证了各路信号互不干扰。

## CSMA/CD 协议   如果两端同时发送信息会出现什么情况，为什么？

两端都检测到冲突，均停止发送数据，等待一个随机时间再重发



## 简述一下停等协议ARQ (链路层/传输层)

停止等待协议是数据链路层（有些书说是传输层）为保证可靠传输，以流量控制为目的的一个协议。通过滑动窗口来限制发送方的发送速度



其工作原理简单的说就是每发送一个分组就停止发送，等待对方的确认，在收到确认后再发送下一个分组，如果接受方不返回应答，则发送方必须一直等待。即发送窗口和接收窗口都为1



细节描述：

①如果发送方如果一段时间仍没有收到确认，就认为刚才发送的分组丢失了，因而重传前面发送过的分组。

②**如果接收方的确认分组丢失或者因其他原因，收到了重传分组，则：丢弃这个重传分组，并且向发送方发送确认。**



ARQ协议还有`后退N帧协议 GBN `(发送窗口 >= 1，接收窗口 = 1 , 发信侧不用等待收信侧的应答，持续的发送多个帧，假如发现已发送的帧中有错误发生，那么从那个发生错误的帧开始及其之后所有的帧全部再重新发送。)，`选择重传协议SR`(发送窗口 >= 1，接收窗口 = 1 , 发信侧不用等待收信侧的应答，持续的发送多个帧，假如发现已发送的帧中有错误发生，那么从那个发生错误的帧开始及其之后所有的帧全部再重新发送。)



详见 [数据链路层流量控制的方法 —— ARQ协议](https://veal98.github.io/CS-Wiki/#/计算机网络/[三]数据链路层?id=_2-数据链路层流量控制的方法-arq协议)

## 连接两个局域网需要用什么设备，在哪一层

首先，来区分以下几个常见设备：



**物理层设备：中继器，集线器** —— 均不能隔离冲突域和广播域

- `中继器（RP repeater）`：是工作在物理层上的连接设备。适用于完全相同的两个网络的互连，主要功能是通过对数据信号的重新发送或者转发，来**扩大网络传输的距离**。 中继器是对信号进行再生和还原的网络设备，设计的目的是给你的网络信号以推动，以使它们传输得更远。
- `集线器(Hub)`：“Hub”是“中心”的意思，集线器的主要功能是对接收到的信号进行再生整形放大，以扩大网络的传输距离，同时把所有节点集中在以它为中心的节点上。**它可以视作多端口的中继器**，若它侦测到碰撞，它会提交阻塞信号。
   ![img](https://cdn.nlark.com/yuque/0/2020/jpeg/1237282/1586070307165-3532b0cf-71ca-43e3-88d6-8fef18d9ebcc.jpeg)



**链路层设备：网桥，交换机** —— 隔离冲突域不能隔离广播域

- `网桥（Bridge）` : 是早期的两端口二层网络设备，用来连接不同网段。网桥的两个端口分别有一条独立的交换信道，不是共享一条背板总线，可隔离冲突域。网桥比集线器（Hub）性能更好，集线器上各端口都是共享同一条背板总线的。后来，网桥被具有更多端口、同时也可隔离冲突域的交换机（Switch）所取代。 
  网桥（Bridge）像一个聪明的中继器。中继器从一个网络电缆里接收信号， 放大它们，将其送入下一个电缆。相比较而言，网桥对从关卡上传下来的信息更敏锐一些。**网桥是一种对帧进行转发的技术，根据MAC分区块，可隔离碰撞。网桥将网络的多个网段在数据链路层连接起来。** 
  网桥也叫桥接器，是连接两个局域网的一种存储/转发设备，它能将一个大的LAN分割为多个网段，或将两个以上的LAN互联为一个逻辑LAN，使LAN上的所有用户都可访问服务器。 
  扩展局域网最常见的方法是使用网桥。最简单的网桥有两个端口，复杂些的网桥可以有更多的端口。网桥的每个端口与一个网段相连。 
  ![img](https://cdn.nlark.com/yuque/0/2020/png/1237282/1586070307152-392187e6-2a59-4fd4-8451-d342ca5994bc.png)
- `交换机（Switch）` 意为“开关”是一种用于电（光）信号转发的网络设备。它可以为接入交换机的任意两个网络节点提供独享的电信号通路。最常见的交换机是以太网交换机。其他常见的还有电话语音交换机、光纤交换机等。 
  交换是按照通信两端传输信息的需要，用人工或设备自动完成的方法，把要传输的信息送到符合要求的相应路由上的技术的统称。交换机根据工作位置的不同，可以分为广域网交换机和局域网交换机。广域的交换机就是一种在通信系统中完成信息交换功能的设备，它应用在数据链路层。交换机有多个端口，每个端口都具有桥接功能，可以连接一个局域网或一台高性能服务器或工作站。**实际上，交换机有时被称为多端口网桥。** 
  网络交换机，是一个扩大网络的器材，能为子网络中提供更多的连接端口，以便连接更多的计算机。随着通信业的发展以及国民经济信息化的推进，网络交换机市场呈稳步上升态势。它具有性价比高、高度灵活、相对简单和易于实现等特点。以太网技术已成为当今最重要的一种局域网组网技术，网络交换机也就成为了最普及的交换机。



**网路层设备：路由器** —— 隔离冲突域和广播域

- `路由器` 又可以称之为网关设备。对不同的网络之间的数据包进行存储、分组转发处理，其主要就是在不同的逻辑分开网络。而数据在一个子网中传输到另一个子网中，可以通过路由器的路由功能进行处理。在网络通信中，路由器具有判断网络地址以及选择IP路径的作用，可以在多个网络环境中，构建灵活的链接系统，通过不同的数据分组以及介质访问方式对各个子网进行链接。路由器在操作中仅接受源站或者其他相关路由器传递的信息，是一种基于网络层的互联设备。 
  比如你买了个路由器，有2台电脑，在路由器的这边你家就是一个局域网，而在路由器的那边却是一个互联网，**所以路由器可以连接两个不同类型的网络。** 
  ![img](https://cdn.nlark.com/yuque/0/2020/png/1237282/1586070307273-3d609256-83bf-47b5-a0cf-d5b6266a6501.png)



**综上可得，连接两个局域网，即连接两个同类型网络，需要使用网桥或者交换机，工作在数据链路层。**



## 电路交换，报文交换，分组交换之间的区别以及联系

**为什么要数据交换**：交换是通过某些交换中心将数据进行集中和传送，传输线路为各个用户共用，从而大大节省通信线路，降低系统费用

![img](https://cdn.nlark.com/yuque/0/2020/png/1237282/1586070307153-4d54cc8c-40c6-49bf-aa67-ee49d0bb1b21.png)

![img](https://cdn.nlark.com/yuque/0/2020/png/1237282/1586070307236-4aeb684d-d468-431c-91fa-efa6686a4a98.png)



电路交换：类似打电话，独占这条线路，其他人无法参加（电路交换传bit流，发生在物理层）

报文交换：报文是应用层传输单位，即站点一次性要发送的数据块（报文交换传报文，发生在传输层）

分组交换：是将较大的数据分割成小块（分组交换传分组/IP数据报，发生在网络层）



## 分组交换的优点和缺点

与报文交换相比较，分组交换的优点和缺点如下。

**优点：**

- ① **加速传输**：因为分组交换是逐个传输，所以可以使后一个分组的存储操作与前一个分组的转发操作并 行，这种流水线式传输方式减少了报文的传输时间，此外，传输一个分组所需的缓冲区比传输一个报 文所需的缓冲区小得多，这样因缓冲区不足而等待发送的几率及等待的时间也必然减少。
- ② **简化了存储管理**：分组的长度固定，相应的缓冲区大小也固定。
- ③ **减少出错几率和重发数据量**：因为分组较短，其出错几率必然减少，所以每次重发的数据量也就大大 减少，这样不仅提高了可靠性，也减少了传输时延。



**缺点**：

- ① **存在传输时延**：尽管与报文交换相比的传输时延较短，但是与电路交换相比仍然存在存储转发时延， 而且对其结点交换机的处理能力有更高的要求。
- ② 当分组交换采用数据报服务时，可能出现失序、丢失或重复分组，**分组到达的目的地的结点时，要对 分组按编号进行排序工作，工作量较大。**



# 三、网络层

## 网络的分类

![img](https://cdn.nlark.com/yuque/0/2020/png/1237282/1586070307247-9d6f2eba-73e4-4e94-9252-4b1c66b23b64.png)

## 网络层协议

- `ARP 地址解析协议` （ARP 实现由 IP 地址得到 MAC 地址）

- `ICMP 网际报文控制协议` （ICMP 是为了更有效地转发 IP 数据报和提高交付成功的机会）

- 路由转发协议

  **内部网关协议：**(一个自治系统AS内的网关协议)

  - `RIP 路由信息协议`：仅和邻居交换信息，且交换的是整个路由表，适用于小规模网络，传输层使用UDP

  - `OSPF 开放最短路由协议`：向自治域中所有路由器发送信息，且发送的是链路状态表，根据代价选择最佳路由，基于IP协议
  
  **外部网关协议：**
  
  - `BGP 外部网关协议`：不同AS的路由器之间交换路由信息的协议

## IPV4和IPV6的位数

IPV4是32位；IPV6是128位

## IPv4地址缺乏的解决办法(替代方案)

- `NAT 网络地址转换`：根据NAT转换表，**NAT路由器将 专用网上的IP地址 和 因特网上的外部全球唯一IP地址 进行转化**
- `CIDR 无分类编址，构成超网`：CIDR消除了传统的A类、B类和C类地址以及划分子网的概念，融合子网地址和子网掩码，方便子网划分，**把网络前缀都相同的连续IP地址组成一个CIDR地址块**

## IPv4和IPv6如何相互通信？

32位的IPV4地址空间已分配殆尽，CIDR、NAT治标不治本，IPV6从根本上解决地址耗尽问题。

IPV4向IPV6过渡的策略：

- `双栈协议`：同时启用IPV4和IPV6协议栈
- `隧道技术`：将其他协议的数据帧或包**重新封装**然后通过隧道发送

## 路由器和交换机的区别

- 交换机工作在数据链路层，交换机根据MAC地址寻址。

  路由器工作在网络层，根据IP地址寻址，路由器可以处理TCP/IP协议，而交换机不可以。

- 路由器可以为局域网自动分配IP和虚拟拨号。

  交换机只是用来分配网络数据的。

- 路由器可以把一个IP分给多个主机使用，对外IP相同。

  交换机可以把很多主机连接起来，对外的IP不同。

- 路由器可以提供防火墙，交换机不能提供这个功能。

- 交换机是做扩大局域网接入点的，可以让局域网连进更多的电脑。

  路由器是用来做网间连接，也就是用来连接不同网络的。

## 说一下路由器的原理

传统地，路由器工作于OSI七层协议中的第三层网络层，**其主要任务是接收来自一个网络接口的数据包，根据 其中所含的目的地址，决定转发到下一个目的地址**。因此，路由器首先去掉数据包的二层头，取出目的 IP地址，**在转发路由表中查找它对应的下一跳地址**，若找到，就在数据包的帧格前添加下一个MAC地 址，同时IP数据包头的TTL（Time To Live）域也减一，并重新计算校验和。当数据包被送到输出端口 时，它需要按顺序等待，以便被传送到输出链路上



# 四、运输层

## TCP与UDP的连接区别及适用情况

- `用户数据报协议 UDP（User Datagram Protocol）`

  **UDP 在传送数据之前不需要先建立连接**，远地主机在收到 UDP 报文后，不需要给出任何确认。虽然 

  UDP **不提供可靠交付**，但在某些情况下 UDP 确是一种最有效的工作方式（**一般用于即时通信），比**

  **如： QQ 语音、 QQ 视频 、直播等等**

- `传输控制协议 TCP（Transmission Control Protocol）`

  TCP 提供**面向连接**的服务。在传送数据之前必须先建立连接，数据传送结束后要释放连接。

  TCP 不提供广播或多播服务。由于 TCP 要提供**可靠**的，面向连接的传输服务（TCP的可靠体现在TCP在传递数据之前，会有三次握手来建立连接，而且在数据传递时，有确认、窗口、重传、流量控制、拥塞控制机制，在数据传完后，还会断开连接用来节约系统资源。这不仅使协议数据单元的首部增大很多，还要占用许多处理机资源。TCP **一般用于文件传输、发送和接收邮件、远程登录等场景**。

## TCP三次握手/四次握手

详见 [TCP连接建立和释放](https://veal98.github.io/CS-Wiki/#/计算机网络/[五]传输层?id=七、tcp三次握手-建立连接)

## 什么是滑动窗口协议

流量控制是为了**控制发送方发送速率**，保证接收方来得及接收。

TCP实现流量控制主要是 **滑动窗口协议**， 使用这种方法的时候，发送方和接收方向外通信各使用一个窗口。窗口大小取决于下面两个数：接收窗口（rwnd）和拥塞窗口（cwnd）。

接收方发送的确认报文中的窗口字段可以用来控制发送方窗口大小，从而影响发送方的发送速率。将窗口字段 rwnd 设置为 0，则发送方不能发送数据。

（接收方根据自己接收缓存的大小，即接收窗口`rwnd`，动态的调整发送方的发送窗口大小，发送方的发送窗口取接收窗口rwnd和**拥塞窗口cwnd**的最小值。）



>  滑动窗口协议的实际应用：数据链路层的三个ARQ协议

## 流量控制在哪些层实现

流量控制就是要控制发送方数据传输的速率，使接收方来得及接收

**传输层**

- TCP流量控制，利用滑动窗口机制控制发送方的速度

**数据链路层/传输层**

- ARQ停等协议

## 拥塞控制

网络中存在太多的数据包导致数据包被延迟或丢失，从而降低了整个网络的传输性能，这种情况叫做拥塞。 如果产生网络拥塞，则网络的性能明显下降，整个网络的吞吐量将随着输入负荷的增大而下降。



拥塞控制：可分为闭环控制和开环控制。开环控制是在设计网络时事先将有关拥塞的因素考虑到，力求网 络在工作时不产生拥塞。闭环拥塞是基于反馈环路的概念。



拥塞控制的4种算法：

- ① 慢开始算法（指数增长）
- ② 拥塞避免算法（加法增大，乘法减小）
- ③ 快重传算法
- ④ 快恢复算法



# 五、应用层

## 应用层有什么协议，举出两个协议的作用

- `DNS`
   将域名解析成IP地址
- `DHCP`
   使主机动态获取IP地址
- `HTTP`
   超文本传输协议，所有的 WWW（万维网） 文件都必须遵守这个标准。设计 HTTP 最初的目的是为了提供一种发布和接收 HTML 页面的方法。
- `FTP(文件传输协议)`
- `SMTP 邮件发送协议`
- `POP3、IMAP 邮件接收协议`

## 网络通信过程

打开一个网页网络通信过程：

- `应用层`：首先通过**DNS协议**进行域名解析，获得IP地址，具体过程如下：

  - 浏览器搜索**自己的DNS缓存**，缓存中维护一张域名与IP地址的对应表；

  - 若没有，则搜索**操作系统的DNS缓存**；

  - 若没有，则操作系统将域名发送至**本地域名服务器**（递归查询方式），本地域名服务器查询自己的DNS缓存，查找成功则返回结果，否则，通过以下方式迭代查找：

    本地域名服务器向根域名服务器发起请求，根域名服务器返回com域的顶级域名服务器的地址；

    本地域名服务器向com域的顶级域名服务器发起请求，返回权限域名服务器地址；

    本地域名服务器向权限域名服务器发起请求，得到IP地址；

  - 本地域名服务器将得到的IP地址返回给操作系统，同时自己将IP地址缓存起来；

  - 操作系统将IP地址返回给浏览器，同时自己也将IP地址缓存起来；

  至此，浏览器已经得到了域名对应的IP地址。

- 浏览器发送**HTTP**请求；

- 接下来到了`传输层`，**TCP**三次握手建立连接；

- 接下来到来`网络层`，建立TCP连接时需要传送数据，传送数据在网络层使用**IP协议**，通过IP协议将IP地址封装为IP数据报；

  IP数据报在路由器之间进行传送的时候，需要使用**路由选择协议OSPF；**

  路由器在与服务器通信的时候，需要将IP地址转换为MAC地址，此时就需要使用**ARP协议；**主机发送信息时将包含目标IP地址，将ARP请求广播到网络上的所有主机，并接收返回消息，以此确定目标的物理地址，找到目的MAC地址；

- 接下来到了`数据链路层`，把网络层交下来的IP数据报添加首部和尾部，封装为MAC帧，现在根据目的MAC地址开始**建立TCP连接**，三次握手，接收端在收到物理层上交的比特流后，根据首尾的标记，识别帧的开始和结束，将中间的数据部分上交给网络层，然后层层向上传递到应用层；

- 服务器**响应浏览器发送的HTTP请求**并请求客户端要的资源，传回给客户端；

- 断开TCP连接，浏览器通过**HTTP协议**对页面进行渲染呈现给客户端。



**总结以上过程，用到的协议依次为：**

**DNS ——> HTTP** **——> TCP** **——> IP** **——> OSPF** **——>ARP** **——>TCP** **——>HTTP**