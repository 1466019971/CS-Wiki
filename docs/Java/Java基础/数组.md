# 👨‍🏫 数组

---

## 1. 概述

```java
int[] a = new int[100]
```

这条语句创建了一个可以存储 100 个整数的数组。

> 📜 可以使用下面两种形式声明数组 ：
>
> `int[] a;`
>
> 或 
>
> `int a[];` 
>
> 大多数 Java 应用程序员喜欢使用第一种风格， 因为它将类型 `int[] `( 整型数组）与变量名分开了。

创建一个数字数组时， 所有元素都初始化为 0。`boolean `数组的元素会初始化为 `false`， **对象数组的元素则初始化为一个特殊值 `null`, 这表示这些元素（还）未存放任何对象**。例如：

```java
String[] news = new String[10];
```

会创建一个包含 10 个字符串的数组， 所有字符串都为 null。

要想获得数组中的元素个数，可以使用 `array.length`：

```java
System.out.println(a.length);
```

> 🚨 注意区别于 String 类的 `length()` 方法，此处用的是属性`length`

**一旦创建了数组， 就不能再改变它的大小**（尽管可以改变每一个数组元素）。**如果经常需要在运行过程中扩展数组的大小， 就应该使用另一种数据结构 — `ArrayList`** 。

## 2. for each 循环

Java 有一种功能很强的循环结构， 可以用来依次处理数组中的每个元素（其他类型的元素集合亦可）而**不必为指定下标值而分心**。 这种**增强的 for 循环**的语句格式为：

```java
for(variable:collection){
    // todo
}
```

**collection 这一集合表达式必须是一个数组或者是一个实现了 `Iterable `接口的类对象**（例如 `ArrayList`)。

```java
int[] a = new int[100];
for(int i = 0; i < 100; i++)
    a[i] = i;

for(int element: a)
    System.out.println(element);
```

> 📜 for each 循环语句的循环变量将会遍历数组中的每个元素， 而不需要使用下标值。

>  🚩 **有个更加简单的方式打印数组中的所有值**， 即利用 `Arrays` 类的 `toString` 方法。 调用 `Arrays.toString(a)`, 返回一个包含数组元素的字符串，这些元素被放置在括号内， 并用逗号分隔， 例如，“ [2,3,5,7,11,13] ” ，要想打印数组，可以调用 
>
>  ```java
>  System.out.println(Arrays.toString(a));
>  ```

## 3. 数组初始化以及匿名数组

在 Java中， 提供了一种创建数组对象并同时赋予初始值的简化书写形式。下面是例子： 

```java
int[] smallPrimes = { 2, 3, 5, 7, 11, 13 };
```

 请注意， 在使用这种语句时，不需要调用 new。 

甚至还可以初始化一个**匿名的数组**： 

```java
new int[] { 17, 19, 23, 29, 31, 37 } 
```

这种表示法将创建一个新数组并利用括号中提供的值进行初始化，数组的大小就是初始值的 个数。 **使用这种语法形式可以在不创建新变量的情况下重新初始化一个数组**。例如： 

```java
smallPrimes = new int[] { 17, 19, 23, 29, 31, 37 };
```

> 📜 在 Java 中， 允许数组长度为 0。**在编写一个结果为数组的方法时， 如果碰巧结果为空， 则这种语法形式就显得非常有用**。此时可以创建一个长度为 0 的数组： 
>
> ```java
> new elementType[0] 
> ```
>
> 注意， 数组长度为 0 与 null 不同

## 4. 数组拷贝

在 Java 中，允许**将一个数组变量拷贝给另一个数组变量。这时， 两个变量将引用同一个数组**：

```java
int[] a = {1,2,3,4,5};
int[] b = a;
b[1] = 10; // a[1] 也变成 10
```

**如果希望将一个数组的所有值拷贝到一个新的数组中去， 就要使用 `Arrays` 类的 `copyOf` 方法**：

```java
int[] c = Arrays.copyOf(a, 2 * a.length());
```

💡 **第 2 个参数是新数组的长度。这个方法通常用来增加数组的大小**：<u>如果数组元素是数值型，那么多余的元素将被赋值为 0 ; 如果数组元素是布尔型，则将赋值为 false。相反，如果长度小于原始数组的长度，则只拷贝最前面的数据元素。</u>

## 5. 命令行参数

前面已经看到多个使用 Java 数组的示例。 每一个 Java 应用程序都有一个带 `String[] args `参数的 main 方法。**这个参数表明 `main `方法将接收一个字符串数组， 也就是命令行参数**。

```java
public class Demo {
    public static void main(String[] args){
        if (args.length == 0 || args[0].equals("-h"))
            System.out.print("Hello,");
        else if (args[0].equals("-g"))
            System.out.print("Goodbye,");
        // print the other command-line arguments
        for (int i = 1; i < args.length; i ++)
            System.out.print(" " + args[i]);
        System.out.println("!");
    }
}
```

<img src="https://gitee.com/veal98/images/raw/master/img/20200617145407.png" style="zoom:80%;" />

> 📜 在 Java 应用程序的 main 方法中， `程序名并没有存储在 args 数组中`。例如, 当使用下列命令运行程序时 :
>
> `java Demo-h world`， 
>
> `args[0]` 是 `-h`， 而不是“ Demo” 或“ java”

## 6. 数组排序 Arrays.sort()

要想对数值型数组进行排序， 可以使用 `Arrays `类中的 `sort` 方法：

```java
int[] a = new int[1000];
...
Arrays.sort(a);
```

**这个方法使用了优化的快速排序算法**。

之所以能够利用 `Arrays.sort()` 对这个对象数组排序，前提是这个对象是实现了 `Comparable `接口的类的实例。`Array.sort` 还能传入一个比较器参数，详细请参见 <u>4-接口</u>

👇 Arrays 类还提供了几个使用很便捷的方法，API 如下：

![](https://gitee.com/veal98/images/raw/master/img/20200617150457.png)

## 7. 多维数组

在 Java 中， 声明一个二维数组相当简单。例如： 

```java
double[][] a;
```

 **与一维数组一样， 在调用 new 对多维数组进行初始化之前不能使用它**。 在这里可以这样初始化：

```java
a = new double[2][3]:
```

另外， 如果知道数组元素， 就可以不调用 new， 而直接使用简化的书写形式对多维数组 进行初始化。例如：

```java
int[][] a = { 
    {16, 3, 2, 13}， 
    {5, 10, 11, 8}, 
    {9, 6, 7, 12}, 
    {4, 15, 14, 1} 
};
```

 一旦数组被初始化， 就可以利用两个方括号访问每个元素， 例如， `a[i][j]`。

> 📜  **for each 循环语句不能自动处理二维数组的每一个元素。它是按照行， 也就是一维数组处理的。要想访问二维数组 a 的所有元素， 需要使用两个嵌套的循环**， 如下所示：
>
> ```java
> public class Demo {
>  public static void main(String[] args){
>      int[][] a = { 
>          {16, 3, 2, 13},
>          {5, 10, 11, 8}, 
>          {9, 6, 7, 12}, 
>          {4, 15, 14, 1} 
>      };
>      for(int[] row : a)
>          for(int value : row)
>              System.out.println(row + " " + value);
>  }
> }
> ```
>
> <img src="https://gitee.com/veal98/images/raw/master/img/20200617151555.png" style="zoom:80%;" />

> 💡 要想**快速地打印一个二维数组的数据元素列表**， 可以调用 `Arrays.deepToString` ：
>
> ```java
> System.out.println(Arrays.deepToString(a));
> // [[16, 3, 2, 13], [5, 10, 11, 8], [9, 6, 7, 12], [4, 15, 14, 1]]
> ```

## 8. 不规则数组

到目前为止，读者所看到的数组与其他程序设计语言中提供的数组没有多大区别。但实际存在着一些细微的差异， 而这正是 Java 的优势所在：**Java 实际上没有多维数组，只有一维数组**。多维数组被解释为“ **数组的数组**”。

<img src="https://gitee.com/veal98/images/raw/master/img/20200617153937.png" style="zoom: 67%;" />

由于可以单独地存取数组的某一行， 所以可以让两行交换。

```java
int[] temp = a[1];
a[1] = a[2];
a[2] = temp;
```

还可以方便地构造一个**“ 不规则” 数组**， 即**数组的每一行有不同的长度**。下面是一个典型的示例。

```java
import java.util.Arrays;

public class Demo {
    public static void main(String[] args){
        int[][] odds = new int[6][];
        for(int i = 0; i < 6; i++)
            odds[i] = new int[i+1]; // 二维数组的每行都增加一个元素
        for(int i = 0; i < odds.length; i++){
            for(int j = 0; j < odds[i].length; j++){
                odds[i][j] = i + 1;
            }
        }
        System.out.println(Arrays.deepToString(odds)); 
        // [[1], [2, 2], [3, 3, 3], [4, 4, 4, 4], [5, 5, 5, 5, 5], [6, 6, 6, 6, 6, 6]]
    }
}
```

## 