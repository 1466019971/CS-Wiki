# 🏋️‍♂️【六】数据库设计之E-R图

---



P.P.S.Chen 提出的 E-R 模型使用 E-R 图来描述现实世界的概念模型。E-R模型涉及的主要概念包括实体、属性、实体之间的联系等

- **实体 entity：**客观存在并可相互区别的事物，比如一个学生，一门课，学生的一次选课
- **属性：**实体所具有的特性，比如学生的身高
- **码：**唯一标识实体的属性集，比如学生的学号
- **实体型**： 实体名+属性名，比如 <u>学生（学号，姓名，性别）</u>就是一个实体型
- **实体集**：同一类型的实体的集合，比如全体学生
- **联系 relationship**：实体之间的联系（有一对一，一对多，多对多等多种类型）

<br>

# 一、实体之间的联系

## 1. 两个实体型之间的联系

可分为以下三种：

### ① 一对一联系 1：1

例如一个班级一个只有班长，班长和班级之间具有一对一联系

<img src="https://gitee.com/veal98/images/raw/master/img/20200419162515.png" style="zoom: 80%;" />

### ② 一对多联系 1：n

例如一个班级中有若干个学生，且每个学生只在一个班级中学习，班级与学生之间具有一对多联系

<img src="https://gitee.com/veal98/images/raw/master/img/20200419162536.png" style="zoom:80%;" />

### ③ 多对多联系 m：n

例如一门课程同时有若干个学生选修，而一个学生可以选修多个课程，则课程和学生之间具有多对多联系

<img src="https://gitee.com/veal98/images/raw/master/img/20200419162557.png" style="zoom:80%;" />

## 2. 两个以上实体型之间的联系

两个以上实体型之间的联系也存在一对一，一对多，多对多的联系

例如，对于课程，教师，参考书三个实体型，一门课程可以有若干个教师讲授，使用若干本参考书，而每一个教师只讲授一门课程，每一本参考书只供一门课程使用，则课程与教师、参考书之间的联系是一对多的

<img src="https://gitee.com/veal98/images/raw/master/img/20200419163203.png" style="zoom:80%;" />

又如：对于供应商，项目，零件三个实体型，一个供应商可以给多个项目供应零件，每个项目可以使用多个供应商提供的零件，每种零件可由不同供应商提供，则供应商、项目、零件三者之间的关系就是多对多的联系

<img src="https://gitee.com/veal98/images/raw/master/img/20200419163220.png" style="zoom:80%;" />



## 3. 单个实体型内的联系

同一个实体型内的各实体之间也存在一对一、一对多、多对多的联系。

例如：职工实体型内部具有领导和被领导的联系，即某一职工领导若干名职工，而一个职工仅被另外一个职工直接领导，因此这是一对多的联系

<img src="https://gitee.com/veal98/images/raw/master/img/20200419163528.png" style="zoom:80%;" />

<br>

# 二、E-R 图

## 1. 基本表示方法

E-R 图提供了表示实体型、属性、联系的方法

- **实体型用矩形表示**，矩形框内写明实体名
- **属性用椭圆形表示**，并用无向边将其与相应的实体型连接起来
- **联系用菱形表示**，菱形框内写明联系名，并用无向边分别与有关实体型连接起来，同时在无向边旁标上联系的类型（1：1, 1：n, m : n)

例如：

![](https://gitee.com/veal98/images/raw/master/img/20200419164120.png)

## 2. 实例

下面用E-R图来表示某个工厂物资管理的概念模型

<img src="https://gitee.com/veal98/images/raw/master/img/20200419164431.png" style="zoom:80%;" />

E-R 图如下：

<img src="https://gitee.com/veal98/images/raw/master/img/20200419164942.png"  />