# Vue.js 监听属性

关键字：`watch`<br />我们可以通过 watch 来响应数据的变化。<br />
<br />虽然计算属性在大多数情况下更合适，但有时也需要一个自定义的侦听器。这就是为什么 Vue 通过 `watch` 选项提供了一个更通用的方法，来响应数据的变化。当需要在数据变化时执行异步或开销较大的操作时，这个方式是最有用的。<br />

<a name="00Mqb"></a>
### 实例1：通过使用 watch 实现计数器


```html
<body>
<div id = "app">
 <p style = "font-size:25px;">计数器: {{ counter }}</p>
 <button @click = "counter++" style = "font-size:25px;">点我</button>
</div>
<script type = "text/javascript">
 var vm = new Vue({
    el: '#app',
    data: {
       counter: 1
    }
 });
  //如果counter发生改变，这个函数就会运行
 vm.$watch('counter', function(nval, oval) {
    alert('计数器值的变化 :' + oval + ' 变为 ' + nval + '!');
 });
</script>
</body>
```
运行结果：<br />![image.png](https://cdn.nlark.com/yuque/0/2020/png/1237282/1586504139566-c7c9d25f-0190-46c9-b54d-750a9594c3e8.png#align=left&display=inline&height=90&name=image.png&originHeight=180&originWidth=346&size=7168&status=done&style=none&width=173)![image.png](https://cdn.nlark.com/yuque/0/2020/png/1237282/1586504148566-2e410d06-57c1-410a-9855-5a222bbc1947.png#align=left&display=inline&height=98&name=image.png&originHeight=163&originWidth=556&size=7211&status=done&style=none&width=333)<br />

<a name="skFdX"></a>
### 实例2：watch监听 千米和米互换


```html
 <body>
      <div id = "computed_props">
        // v-model双向绑定
         千米 : <input type = "text" v-model = "kilometers">
         米 : <input type = "text" v-model = "meters">
      </div>
	   <p id="info"></p>
      <script type = "text/javascript">
         var vm = new Vue({
            el: '#computed_props',
            data: {
               kilometers : 0,
               meters:0
            },
            methods: {
            },
            computed :{
            },
            watch : {
               kilometers:function(val) {
                  this.kilometers = val;
                  this.meters = this.kilometers * 1000
               },
               meters : function (val) {
                  this.kilometers = val/ 1000;
                  this.meters = val;
               }
            }
         });
         // $watch 是一个实例方法
		vm.$watch('kilometers', function (newValue, oldValue) {
			// 这个回调将在 vm.kilometers 改变后调用
		    document.getElementById ("info").innerHTML = "修改前值为: " + oldValue + "，修改后值为: " + newValue;
		})
      </script>
   </body>
```
运行结果：<br />![GIF 2020-4-10 15-50-07.gif](https://cdn.nlark.com/yuque/0/2020/gif/1237282/1586505031499-4cbf7c0a-2d2f-4db6-95c0-93e3e8e38fdd.gif#align=left&display=inline&height=100&name=GIF%202020-4-10%2015-50-07.gif&originHeight=128&originWidth=634&size=57363&status=done&style=none&width=491)<br />
<br />watch 对象创建了两个方法 kilometers 和 meters。<br />**当我们在输入框输入数据时，watch 会实时监听数据变化并改变自身的值**
